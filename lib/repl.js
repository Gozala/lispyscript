// Generated by LispyScript v0.2.1
require("./node");

var repl = require("repl");

var vm = require("vm");

var ls = require("../lib/ls");

var dictionary = function() {
  return (function loop(keyValues, result) {
    var recur = loop;
    while ((recur === loop)) {
      recur = (keyValues).length ?
        (function() {
          result[keyValues[0]] = keyValues[1];
          return (keyValues = keyValues.slice(2),
           result = result,
           loop);
        })() :
        result
    };
    return recur;
  })(Array.prototype.slice.call(arguments), {});
};

var evaluate = function(code, context, file, callback) {
  return (function() {
    try {
      return callback(null, vm.runInThisContext(ls._compile(code.substring(1, ((code).length - 2)), file), file))
    } catch (error) {
      return callback(error)
    };
  })();
};

var start = function() {
  console.log(''.concat("LispyScript REPL v", ls.version));
  return repl.start(dictionary("prompt", "lispy> ", "ignoreUndefined", true, "useGlobal", true, "eval", evaluate));
};

exports.start = start;

